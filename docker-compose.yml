# Orquestração dos 4 bancos NoSQL - Plataforma Inteligência de Mercado
# Uso: docker-compose up -d

services:
  redis:
    image: redis:7-alpine
    container_name: redis-cotacoes
    ports:
      - "6379:6379"
    restart: unless-stopped

  mongodb:
    image: mongo:7
    container_name: mongo-datalake
    ports:
      - "27018:27017"
    restart: unless-stopped

  cassandra:
    image: cassandra:4
    container_name: cassandra-series
    ports:
      - "9042:9042"
    environment:
      CASSANDRA_CLUSTER_NAME: CotacoesCluster
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "cqlsh -e 'describe cluster' || exit 1"]
      interval: 15s
      timeout: 10s
      retries: 10
      start_period: 60s

  neo4j:
    image: neo4j:5
    container_name: neo4j-alertas
    ports:
      - "7474:7474"
      - "7687:7687"
    environment:
      NEO4J_AUTH: neo4j/senha123
    restart: unless-stopped
